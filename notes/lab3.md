# lab3 guide (new)

## 规定日志格式


1. 服务器之间的通信

按照`时间搓`+`通信类型`+`发起者->接收者`+`通信内容`的语义来打印日志

**请求投票**: `xxxxxx  [VOTE-1] p0(F,1)->p1 "Ask Vote"`, *p0*在任期1中向*p1*请求投票

**参与投票**: `xxxxxx  [VOTE-1] p1(F,0)->p0 "OKKKK"`, *p1*在任期1中投票给了*p0*

**拒绝投票**: `xxxxxx  [VOTE-1] p1(F,0)->p0 "Refuse Vote:(1,2,3...)"`, *p1*在任期1中拒绝投票给*p0*, 其中1,2,3表示拒绝的原因编号

**追加日志**: `xxxxxx  [APED] p0(L,2)->p1 "Aped Log(2~) {(xx,2), (xx,2)}"`, *p0*根据`nextIndex[1]`, 向*p1*追加了两条日志

**发送心跳**: `xxxxxx  [APED] p0(L,2)->p1 "Heartbeat"`

2. 打印事件的完成情况

按照`时间搓`+`事件类型`+`处理服务器`+`事件内容`的语义来打印日志, 这里尽可能多输出一些服务器的信息

**追加日志**: `xxxxxx  [APED] p1(L,2) "CMIT(3) APLY(2) Add Log[3~] {(xx,2), (xx,2)}"`, 追加了两条日志到*log[4]*和*log[5]*, 当前已提交日志下标是3, 已应用日志下标是2

**提交日志**: `xxxxxx  [CMIT] p0(F,2) "CMIT(3+2) APLY(2) Commit Log[3~] {(xx,2), (xx,2)}"`, 提交了两条日志*log[4]*和*log[5]*, 当前已提交日志下标是3+2, 已应用日志下标是2

**应用日志**: `xxxxxx  [APLY] p2(F,1) "CMIT(3) APLY(2+1) Apply Log[1] {(xx,1)}"`, 应用日志到*log[1]*, 当前已提交日志下标是3, 已应用日志下标是2+1

**开启选举**: `xxxxxx  [VOTE-1] p0(F,1) "Vote Start"`, *p0*开启了任期为1的本轮选举

**统计得票**: `xxxxxx  [VOTE-1] p0(F,1) "Got 3 votes"`, *p0*在任期1的选举中已获得3张票(这条消息只有得票过半才会开始发送)

**任期过期**: `xxxxxx  [HERT] p0(F,2) "p1(L,1) Out of data"`, 领导人*p1*的任期号过期