前面都差不多是正确的, 初始的状态如下:

p0(F,5) Log:[{1 11} {1 12} {5 13}]
p1(F,5) Log:[{1 11} {1 12} {5 13}]
p2(L,5) Log:[{1 11} {1 12} {5 13}]
p3(F,4) Log:[{1 11} {1 12}]
p4(L,1) Log:[{1 11} {1 12}]


现在p3和p4重连上来, p3因为断连的原因, 之前一直在请求投票, 所以连上来第一时间发送了term=5的投票
情况如下:

032252  [Vote-5] p3(F, 5): Vote Start
032252  [Vote-5] p3(F,5)->p4 "Ask Vote"
032252  [Vote-5] p3(F,5)->p1 "Ask Vote"
032252  [Vote-5] p3(F,5)->p2 "Ask Vote"
032252  [Vote-5] p3(F,5)->p0 "Ask Vote"

032252  [Vote-5] p1(F,5)->p3 "Refuse Vote:(12)"
032252  [Vote-5] p4(L,5)->p3 "OKKKK"
032252  [Vote-5] p2(L,5)->p3 "Refuse Vote:(12)"
032252  [Vote-5] p0(F,5)->p3 "Refuse Vote:(12)"

因为p4(L,1)先收到了投票的rpc, 导致它的term更新到了5, 所以其领导人的身份没有被弹劾(如果是先收到来自p2的心跳消息)
则会被弹劾其领导人的身份

所以我们要对这种领导人参与投票的情况进行身份修改